<!DOCTYPE HTML>
<html lang="pt">
<head>
<!-- Generated by javadoc (21) -->
<title>Source code</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="source: package: com.rpg.combate, class: GolpeSagrado">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body class="source-page">
<main role="main">
<div class="source-container">
<pre><span class="source-line-no">001</span><span id="line-1">// src/com/rpg/combate/GolpeSagrado.java</span>
<span class="source-line-no">002</span><span id="line-2">package com.rpg.combate;</span>
<span class="source-line-no">003</span><span id="line-3"></span>
<span class="source-line-no">004</span><span id="line-4">import com.rpg.exceptions.RecursoInsuficienteException;</span>
<span class="source-line-no">005</span><span id="line-5">import jakarta.xml.bind.annotation.XmlRootElement; // Import para a anotação JAXB</span>
<span class="source-line-no">006</span><span id="line-6"></span>
<span class="source-line-no">007</span><span id="line-7">// O import de 'com.rpg.personagens.herois.Paladino' foi removido,</span>
<span class="source-line-no">008</span><span id="line-8">// pois a classe não dependerá mais diretamente do tipo concreto Paladino.</span>
<span class="source-line-no">009</span><span id="line-9"></span>
<span class="source-line-no">010</span><span id="line-10">/**</span>
<span class="source-line-no">011</span><span id="line-11"> * Representa uma habilidade especial de combate, o Golpe Sagrado.</span>
<span class="source-line-no">012</span><span id="line-12"> * Causa dano aumentado com base na força do usuário e em seu atributo de carisma.</span>
<span class="source-line-no">013</span><span id="line-13"> * A sorte do usuário pode potencializar ainda mais o dano desta habilidade.</span>
<span class="source-line-no">014</span><span id="line-14"> * Esta habilidade consome mana do combatente que a executa.</span>
<span class="source-line-no">015</span><span id="line-15"> * A implementação utiliza apenas os métodos disponíveis na interface {@link Combatente},</span>
<span class="source-line-no">016</span><span id="line-16"> * promovendo a reutilização e reduzindo o acoplamento, conforme os princípios de agregação.</span>
<span class="source-line-no">017</span><span id="line-17"> */</span>
<span class="source-line-no">018</span><span id="line-18">@XmlRootElement(name = "golpeSagrado") // Define o elemento raiz para esta classe em XML</span>
<span class="source-line-no">019</span><span id="line-19">public class GolpeSagrado implements AcaoDeCombate {</span>
<span class="source-line-no">020</span><span id="line-20"></span>
<span class="source-line-no">021</span><span id="line-21">    private static final int CUSTO_MANA = 15; // Custo fixo de mana da habilidade</span>
<span class="source-line-no">022</span><span id="line-22"></span>
<span class="source-line-no">023</span><span id="line-23">    /**</span>
<span class="source-line-no">024</span><span id="line-24">     * Construtor sem argumentos exigido pelo JAXB para desserialização.</span>
<span class="source-line-no">025</span><span id="line-25">     */</span>
<span class="source-line-no">026</span><span id="line-26">    public GolpeSagrado() {} // Construtor padrão</span>
<span class="source-line-no">027</span><span id="line-27"></span>
<span class="source-line-no">028</span><span id="line-28">    /**</span>
<span class="source-line-no">029</span><span id="line-29">     * Executa o Golpe Sagrado, causando dano ao alvo.</span>
<span class="source-line-no">030</span><span id="line-30">     * Calcula o dano com base na força do usuário, na arma equipada, no carisma e na sorte.</span>
<span class="source-line-no">031</span><span id="line-31">     * Consome mana do usuário e lança uma exceção se a mana for insuficiente.</span>
<span class="source-line-no">032</span><span id="line-32">     *</span>
<span class="source-line-no">033</span><span id="line-33">     * @param usuario O combatente que está executando a habilidade (espera-se que seja um usuário com mana, carisma e sorte, como o Paladino).</span>
<span class="source-line-no">034</span><span id="line-34">     * @param alvo O combatente que é o alvo da habilidade.</span>
<span class="source-line-no">035</span><span id="line-35">     * @throws RecursoInsuficienteException Se o combatente não tiver mana suficiente para usar a habilidade.</span>
<span class="source-line-no">036</span><span id="line-36">     */</span>
<span class="source-line-no">037</span><span id="line-37">    @Override</span>
<span class="source-line-no">038</span><span id="line-38">    public void executar(Combatente usuario, Combatente alvo) throws RecursoInsuficienteException {</span>
<span class="source-line-no">039</span><span id="line-39">        // A lógica agora opera diretamente com a interface Combatente.</span>
<span class="source-line-no">040</span><span id="line-40">        // Assume-se que a interface Combatente (e consequentemente a classe Personagem</span>
<span class="source-line-no">041</span><span id="line-41">        // e suas subclasses) expõe os getters e setters necessários como getMana(),</span>
<span class="source-line-no">042</span><span id="line-42">        // usarMana(), getArma(), getForca(), getCarisma(), getSorte(), getNome() e receberDano().</span>
<span class="source-line-no">043</span><span id="line-43"></span>
<span class="source-line-no">044</span><span id="line-44">        // --- LÓGICA DE MANA ---</span>
<span class="source-line-no">045</span><span id="line-45">        // 1. Verifica se o usuário tem mana suficiente para usar a habilidade.</span>
<span class="source-line-no">046</span><span id="line-46">        if (usuario.getMana() &lt; CUSTO_MANA) {</span>
<span class="source-line-no">047</span><span id="line-47">            throw new RecursoInsuficienteException("Recursos insuficientes para usar a habilidade.");</span>
<span class="source-line-no">048</span><span id="line-48">        }</span>
<span class="source-line-no">049</span><span id="line-49">        // 2. Se tiver, gasta a mana do usuário.</span>
<span class="source-line-no">050</span><span id="line-50">        usuario.usarMana(CUSTO_MANA);</span>
<span class="source-line-no">051</span><span id="line-51">        // --- FIM DA LÓGICA DE MANA ---</span>
<span class="source-line-no">052</span><span id="line-52"></span>
<span class="source-line-no">053</span><span id="line-53">        // Lógica para cálculo do dano especial.</span>
<span class="source-line-no">054</span><span id="line-54">        // O dano inicial é a força do usuário, mais o dano da arma equipada, mais o carisma.</span>
<span class="source-line-no">055</span><span id="line-55">        int danoEspecial = (usuario.getArma() != null ? usuario.getArma().getDano() : 0) + usuario.getForca() + usuario.getCarisma();</span>
<span class="source-line-no">056</span><span id="line-56"></span>
<span class="source-line-no">057</span><span id="line-57">        // A sorte alta pode aumentar o dano com base no carisma.</span>
<span class="source-line-no">058</span><span id="line-58">        // JAXB: Math.random() não é serializável, mas o resultado é temporário, então não há problema aqui.</span>
<span class="source-line-no">059</span><span id="line-59">        if (usuario.getSorte() &gt; 0.4) {</span>
<span class="source-line-no">060</span><span id="line-60">            double boostDano = danoEspecial * 1.2; // Aplica um bônus de 20% no dano.</span>
<span class="source-line-no">061</span><span id="line-61">            danoEspecial = (int) Math.round(boostDano); // Arredonda o dano para um número inteiro.</span>
<span class="source-line-no">062</span><span id="line-62">            System.out.println("A fé de " + usuario.getNome() + " potencializa o Golpe Sagrado! [atributo de sorte ativado!]");</span>
<span class="source-line-no">063</span><span id="line-63">        } else {</span>
<span class="source-line-no">064</span><span id="line-64">            System.out.println(usuario.getNome() + " usou Golpe Sagrado!");</span>
<span class="source-line-no">065</span><span id="line-65">        }</span>
<span class="source-line-no">066</span><span id="line-66">        </span>
<span class="source-line-no">067</span><span id="line-67">        alvo.receberDano(danoEspecial); // O alvo recebe o dano especial.</span>
<span class="source-line-no">068</span><span id="line-68">        System.out.println(usuario.getNome() + " causou " + danoEspecial + " de dano especial!");</span>
<span class="source-line-no">069</span><span id="line-69">    }</span>
<span class="source-line-no">070</span><span id="line-70">}</span>




























































</pre>
</div>
</main>
</body>
</html>
